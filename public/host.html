<html>

  <head>
    <title> BOM SHOW HOST </title>
    <link rel="stylesheet" type="text/css" href="host.css">

    <nav class="col">
      <h1 style="font-size: 20px;"> BOM_show_host_v1.7 </h1>
      <h3 style="font-size: 15px;"> by matt hilton </h3>
      <ul>
        <li onclick="round()"> ROUND </li>
        <li onclick="score()"> SCORE </li>
        <li onclick="comm()"> COMM </li>
        <li onclick="hot()"> HOTSEAT </li>
      </ul>
    </nav>
  </head>

  <body>
    <div id="round">
      <section id="groupSelection" class="col">
        <h1> SELECT GROUP </h1>
        <ul id="selectGroup">
          <li id="7"> YR7 </li>
          <li id="8"> YR8 </li>
          <li id="9"> YR9 </li>
          <li id="10"> YR10 </li>
          <li id="11"> YR11 </li>
          <li id="12"> YR12 </li>
          <li id="SONG"> SONG </li>
        </ul>
      </section>

      <section id="questionSelection" class="col">
        <h1> QUESTION </h1>
        <ul id="questionList">
        </ul>
      </section>

      <section id="summary" class="col">
        <button id="loadScreen"> Load Normal Screen Display </button>
        <h1> SELECTION </h1>
        <h2> Group: </h2>
          <p id="groupDisplay"> none selected </p>
        <h2> Question: </h2>
          <p id="questionDisplay"> none selected </p>

        <button id="25"> START 25 </button>
        <button id="35"> START 35 </button> <br>

        <button id="cancelRound"> CANCEL ROUND </button>

        <timer id='timer'> 0s </timer>
      </section>
    </div>

    <div id="score">
      <section id="graham" class="col">
        <h1 style="color: red;"> GRAHAM </h1>
        <h3> Team Answer: </h3>
        <p id="answer"> no answer yet... </p>

        <ul>
          <li id="correct"> Correct </li>
          <li id="incorrect"> Incorrect </li>
        <ul>

        <h3> Score: </h3>
        <p id="score"> no score yet... </p>

        <h3> Edit score: </h3>
        <input type="text" return="false" id="g_editscore"> </input>
        <button id="submitEdit"> Submit Edit </button>
      </section>

      <section id="elliot" class="col">
        <h1 style="color: green;"> ELLIOT </h1>
        <h3> Team Answer: </h3>
        <p id="answer"> no answer yet... </p>

        <ul>
          <li id="correct"> Correct </li>
          <li id="incorrect"> Incorrect </li>
        <ul>

        <h3> Score: </h3>
        <p id="score"> </p>

        <h3> Edit score: </h3>
        <input type="text" return="false" id="e_editscore"> </input>
        <button id="submitEdit"> Submit Edit </button>
      </section>

      <section id="wesley" class="col">
        <h1 style="color: yellow;"> WESLEY </h1>
        <h3> Team Answer: </h3>
        <p id="answer"> no answer yet... </p>

        <ul>
          <li id="correct"> Correct </li>
          <li id="incorrect"> Incorrect </li>
        <ul>

        <h3> Score: </h3>
        <p id="score"> </p>

        <h3> Edit score: </h3>
        <input type="text" return="false" id="w_editscore"> </input>
        <button id="submitEdit"> Submit Edit </button>
      </section>

      <section id="booth" class="col">
        <h1 style="color: blue;"> BOOTH </h1>
        <h3> Team Answer: </h3>
        <p id="answer"> no answer yet... </p>

        <ul>
          <li id="correct"> Correct </li>
          <li id="incorrect"> Incorrect </li>
        <ul>

        <h3> Score: </h3>
        <p id="score"> </p>

        <h3> Edit score: </h3>
        <input type="text" return="false" id="b_editscore"> </input>
        <button id="submitEdit"> Submit Edit </button>
      </section>

      <section id="display" class="col">
        <h1> ACCEPTED ANSWERS </h1>
        <p id="acceptedAnswer"> no question selected... </p>
      </section>

      <section id="controls" class="col">
        <h1> CONTROLS </h1>
        <button id="clearTeamDisplay"> Clear Team Display </button> <br> <br>
        <button id="showGraph"> Show Score Graph </button>
        <button id="showAnswer"> Show Answers </button>
      </section>
    </div>

    <div id="comm">
        <section id="sendMessage" class="col">
          <h1> SEND </h1>
          <textarea id="messageInput"> </textarea> <br>
          <button onclick="sendMessage()"> Send Message </button>
        </section>

        <section id="recieveMessage" class="col">
          <h1> RECIEVE </h1>
          <button onclick="clearMessages()"> Clear Messages </button>
          <ul id="recieved">
          </ul>
        </section>
    </div>

    <div id="hot">
      <section id="grade" class="col">
        <h1> GROUP </h1>

        <ul id="hotseatGroups">
          <li id="8"> YR8 </li>
          <li id="10"> YR10 </li>
          <li id="12"> YR12 </li>
        </ul>
      </section>

      <section id="question" class="col">
        <h1> QUESTION </h1>

        <ul id="hotseatQuestions">
        </ul>
      </section>

      <section id="controlHotSeat" class="col">
        <h1> INFO </h1>

        <button id="loadHotSeat"> Load Hot Seat Screen Display </button>
        <button id="startSpinner"> Start Spinner Wheel </button>
        
        <button id="startHOT"> START HOT SEAT ROUND </button>

        <button id="cancelHOT"> CANCEL ROUND </button>

        <h2> Contestant was: </h2>
        <h3 id="answerHOTSEAT"> </h3>

        <h2> Accepted Answer: </h2>
        <h3 id="acceptedHOTSEAT"> </h3>

        <button id="revealHOT"> REVEAL </button>
        <button id="clearTeamDisplay2"> Clear Team Display </button>

        <h3> Group: </h3>
        <p id="groupHOTSEAT"> </p>

        <h3> Question: </h3>
        <p id="questionHOTSEAT"> </p>

        <h1 id="timerHOTSEAT" style="color: red;"> 0s</h1>


      </section>
    </div>

  </body>

  <script src="https://cdn.rawgit.com/alertifyjs/alertify.js/v1.0.10/dist/js/alertify.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"> </script>
  <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
  <script src="host.js"></script>

  <script>
  var socket = io();

  var questions = [];

  var currentGroup = -1;
  var currentQuestion = -1;
  socket.emit("host");
  $("#score").css("display", "none");

  $("#cancelRound").click(function(){
    socket.emit("cancelRound");
  });

  $("#selectGroup li").click(function(){
    currentGroup = $(this).attr('id');
    $("#groupDisplay").html(currentGroup)

    //SHOW question - reads questions.csv to get the questions
    $.ajax({
      url: 'questions.csv',
      dataType: 'text',
    }).done(function(data){

      //process data, splitting the csv file into an array
      data = data.split(/\r\n|\n/);

      for(var i = 0; i < data.length; i++){
        data[i] = data[i].split(",#");
      }

      questions = data;

      $("#questionList").empty();

      data.forEach(function(item){
        if(item[0] == currentGroup){
           $("#questionList").append("<li id=" + item[1] + ">" + item[2] + "</li>");
           $("#questionList li").click(function(){
             // update the question display
             $("#questionDisplay").html($(this).text());
           });
         }
      });
    });
  });
  function sendMessage(){
    var message = $("#messageInput").val();
    console.log(message)
    socket.emit("clientMessage", message);
    $("#messageInput").val('');
  }

  function clearMessages(){
    $("#recieved").empty();
  }

  function score(){
    $("#round").css("display", "none");
    $("#score").css("display", "inherit");
    $("#comm").css("display", "none");
    $("#hot").css("display", "none")
  }

  function round(){
    //hide the score tab and display the round tab
    $("#round").css("display", "inherit");
    $("#score").css("display", "none");
    $("#comm").css("display", "none");
    $("#hot").css("display", "none")
  }

  function comm(){
    $("#score").css("display", "none");
    $("#round").css("display", "none");
    $("#comm").css("display", "inherit");
    $("#hot").css("display", "none")
  }

  function hot(){
    $("#score").css("display", "none");
    $("#round").css("display", "none");
    $("#comm").css("display", "none");
    $("#hot").css("display", "inherit")
  }

  </script>
</html>
