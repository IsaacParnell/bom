<html>

  <head>
    <link rel="stylesheet" type="text/css" href="host.css">

    <nav class="col">
      <h1> NAVIGATION </h1>
      <ul>
        <li onclick="round()"> ROUND </li>
        <li onclick="score()"> SCORE </li>
      </ul>
    </nav>
  </head>

  <body>
    <div id="round">
      <section id="groupSelection" class="col">
        <h1> SELECT GROUP </h1>
        <ul id="selectGroup">
          <li id="7"> YR7 </li>
          <li id="8"> YR8 </li>
          <li id="9"> YR9 </li>
          <li id="10"> YR10 </li>
          <li id="11"> YR11 </li>
          <li id="12"> YR12 </li>
        </ul>
      </section>

      <section id="questionSelection" class="col">
        <h1> QUESTION </h1>
        <ul id="questionList">
        </ul>
      </section>

      <section id="summary" class="col">
        <h1> SELECTION </h1>
        <h2> Group: </h2>
          <p id="groupDisplay"> none selected </p>
        <h2> Question: </h2>
          <p id="questionDisplay"> none selected </p>

        <button id="30"> START 30 </button>
        <button id="60"> START 60 </button> <br>

        <button id="cancelRound"> CANCEL ROUND </button>

        <timer id='timer'> 0s </timer>
      </section>
    </div>

    <div id="score">
      <section id="graham" class="col">
        <h1> GRAHAM </h1>
        <h3> Answer: </h3>
        <p id="answer"> no answer yet... </p>

        <ul>
          <li id="correct"> Correct </li>
          <li id="incorrect"> Incorrect </li>
        <ul>

        <h3> Score: </h3>
        <p id="score"> </p>

        <h3> Edit score: </h3>
        <input type="text" return="false" id="g_editscore"> </input>
        <button id="submitEdit" onclick="submitEdit(g)"> Submit Edit </button>
      </section>


    </div>
  </body>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"> </script>
  <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
  <script src="host.js"></script>

  <script>
  var socket = io();

  var questions = [];

  var currentGroup = -1;
  var currentQuestion = -1;
  socket.emit("host");
  $("#score").css("display", "none");

  $("#cancelRound").click(function(){
    socket.emit("cancelRound");
  });

  $("#selectGroup li").click(function(){
    currentGroup = $(this).attr('id');
    $("#groupDisplay").html(currentGroup)

    //SHOW question - reads questions.csv to get the questions
    $.ajax({
      url: 'questions.csv',
      dataType: 'text',
    }).done(function(data){

      //process data, splitting the csv file into an array
      data = data.split(/\r\n|\n/);

      for(var i = 0; i < data.length; i++){
        data[i] = data[i].split(",");
      }

      questions = data;

      $("#questionList").empty();

      data.forEach(function(item){
        if(item[0] == currentGroup){
           $("#questionList").append("<li id=" + item[1] + ">" + item[2] + "</li>");
           $("#questionList li").click(function(){
             // update the question display
             $("#questionDisplay").html($(this).text());
           });
         }
      });
    });
  });



  function selectQuestion(){
    //TODO same as selectGroup but for questions
  }
  function g_correct(){
    //TODO incorrect and correct for each house

    //REDO use jquery li instead of individual functions
  }
  function submitEdit(){
    //TODO get value from text input box and make it the teams score
  }

  function score(){
    $("#round").css("display", "none");
    $("#score").css("display", "inherit");
  }

  function round(){
    //hide the score tab and display the round tab
    $("#round").css("display", "inherit");
    $("#score").css("display", "none");
  }


  </script>
</html>
